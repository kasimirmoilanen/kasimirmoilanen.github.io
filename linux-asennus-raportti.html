<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Kasimir's page</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
</header>
<div class="row">
	<div class="main">
<h1>Debianin asennus virtuaalikoneeseen</h1>
<h1>Raportti</h1>

<p>Aloitus 2025-08-25 21:35:00</p>
<img src="Images/2025-08-25-213556_1366x768_scrot.png"></img>
<p>Host:<br>
OS: Arch Linux x86_64<br>
Kernel: <br>
  - Raportin alussa 6.16.1-arch1-1<br>
  - Myöhemmin 6.16.3-zen1-1-zen<br>
CPU: Intel i5-7200U<br>
GPU: Intel HD Graphics 620<br>
RAM: 8GB<br>

Virtualbox versio 7.2.0r170228<br>
Levykuva: debian-live-13.0.0-amd64-xfce.iso
</p>
<p> Ensimmäinen ongelma</p>
<p>Tarkistaessani Virtualboxin versiota komennolla:</p>
<p class="code">vboxmanage --version</p>
<p>sain varoituksen joka ilmoitti ettei kernel-moduulia ole ladattuna, eikä virtuaalikoneita voida ajaa ilman sitä:</p>
<img src="Images/2025-08-25-214257_1366x768_scrot.png"></img><br>
<p>Tarkistin asian Virtualboxin graafisesta liittymästä ja sain samantyylisen varoituksen yrittämällä käynnistää virtuaalikoneen:</p>
<img src="Images/2025-08-25-214459_1366x768_scrot.png"></img><br>

<p>Yritin tehdä neuvotulla tavalla ja compilata kernel-moduulin komennolla:</p>
<p class="code">sudo /sbin/vboxconfig</p>
<p>mutta komentoa ei löytynyt</p>
<img src="Images/2025-08-25-215307_1366x768_scrot.png"></img><br>
<p>ajoin vielä komennon ilman sudoa:</p>
<img src="Images/2025-08-25-215627_1366x768_scrot.png"></img><br>
<p>jonka vastauksena sain ettei kyseistä tiedostoa tai hakemistoa ole olemassa.</p>

<p>Googlasin "sudo: /sbin/vboxconfig: command not found"
ja osoitteessa https://bbs.archlinux.org/viewtopic.php?id=278180
käyttäjä Skunktrader on kysynyt samankaltaiseen ongelmaan törmänneeltä käyttäjältä:</p>
<p>"Have you rebooted since upgrading the kernel?</p>
<p>Tämä oli mahdollinen syy ongelmaan joten käynnistin tietokoneen uudelleen noin kello 22:00 mutta ongelmaan ei tullut muutosta.</p>
<p>Kävin katsomassa artikkelia osoitteessa https://wiki.archlinux.org/title/VirtualBox
ja artikkelin alussa mainitaan Install the core packages. Minulla oli virtualbox-host-dkms asennettuna ja arvelin että ehkä vika voisi olla tässä, nimittäin minulla oli ymmärtääkseni tavallinen linux-kernel käytössä eikä esim. linux-zen jota tämän dkms-paketin kanssa käytetään.</p>
<p>Pidin pienen pohtimistauon kello 22:18 samalla kun päivitin järjestelmäni komennolla:</p>
<p class="code">sudo pacman -Syu</p>
<p>Pohdin, että voisin kenties vaihtaa kerneliä linux-zeniin joka minulla on valmiiksi asennettuna ja katsoa mitä tapahtuu. Tekemällä tämän voisin myös saada uutta innostusta tekemiseeni, nimittäin kernelin vaihtamista en ole tehnyt aikoihin ja se voikin olla sitten kivaa puuhaa. :)</p>
<p>Huomasin järjestelmäpäivitykseni lokissa kohdan joka viittasi siihen että olisin mahdollisesti oikeilla jäljillä ongelmassa, ainakin näin päättelin päässäni.</p>
<img src="Images/2025-08-25-222952_1366x768_scrot.png"></img><br>
<p>Listasin saatavilla olevat kernelit komennolla:</p>
<p class="code">find /boot/vmli*</p>
<p>Linux ja Linux-zen kernelit olivat asennettuina.</p>
<p>Tarkistin vielä nykyisen kernelin komennolla:</p>
<p>uname -r</p>
<img src="Images/2025-08-25-223351_1366x768_scrot.png"></img><br>

<p>Käynnistäessäni koneen uudelleen vaihtaakseni kernelin, linux-zen kerneliä ei ollut listattuna GRUBissa. Lähdin selvittämään mistä on kyse.</p>
<p>https://www.reddit.com/r/archlinux/comments/rn43y0/arch_seems_stuck_at_boot/?utm_medium=android_app&utm_source=share
Käyttäjä hearthreddit kysyy hieman erilaiseen ongelmaan törmänneeltä:</p>
<p>Did you regenerate your grub config?</p>
<p>Vaikka henkilön ongelma olikin erilainen, kokeilin tätä ehdotettua komentoa:</p>
<p class="code">sudo grub-mkconfig -o /boot/grub/grub.cfg</p>
<p>Mutta komentoa ei löytynyt</p>
<p>Löysin vastauksen sivulta https://bobcares.com/blog/grub-mkconfig-command-not-found/
josta selvisi että saan komennon asentamalla grub-paketin.</p>
<p>Ajoin siis komennon:</p>
<p class="code">pacman -S grub</p>
<p>ja seuraava ongelma johon törmäsin ajaessani komentoa:</p>
<p class="code">sudo grub-mkconfig -o /boot/grub/grub.cfg</p>
<p>olikin seuraavanlainen:</p>
<img src="Images/2025-08-25-224957_1366x768_scrot.png"></img><br>
<p class="code">/usr/bin/grub-mkconfig: line 270: /boot/grub/grub.cfg.new: No such file or directory</p>
<p>Tein kyseisellä errorilla haun netissä ja sain seuraavan foorumipostauksen hakutuloksissa:</p>
<p>https://www.linuxquestions.org/questions/arch-29/installation-problem-grub-config-error-no-such-file-or-directory-4175643477/
jossa käyttäjä colorpurple21859 kysyy ja ehdottaa:</p>
<p>does the directory /boot/grub exist? If not create the /boot/grub directory.</p>
<p>Loin siis uuden hakemiston komennolla:</p>
<p class="code">sudo mkdir /boot/grub</p>
<p>joka vaikutti toimineen onnistuneesti.</p>
<img src="Images/2025-08-25-225326_1366x768_scrot.png"></img><br>
		
<p>Käynnistin siis koneeni uudelleen jospa sieltä olisi löytynyt GRUBista linux-zen mutta eipä näkynyt.</p>
<p>Pohdiskelin että tämä johtui mahdollisesti siitä, ettei GRUB käytä sitä config-tiedostoa jonka olin generoinut grub-mkconfig -komennolla. Loin aikaisemmin uuden hakemiston /boot/grub/ ja sinne config-tiedoston grub.cfg, mutta mahdollisesti järjestelmä oli konfiguroitu käyttämään jossakin toisessa sijainnissa olevaa konfigurointi-tiedostoa. Näin siis päättelin ilman varmuutta asiasta.</p>
<p>Lähdin sitten seikkailemaan hakemistoon /boot ja pienen tutkinnan jälkeen huomasin että hakemiston /boot/loader/entries/ sisällä näyttäisi olevan ne vaihtoehdot jotka näen GRUBissa. Linux-zeniä ei siellä näkynyt.</p>
<p>Löysin netistä uuden artikkelin jossa luotiin uusi tiedosto tähän hakemistoon ja otin siitä hieman mallia:</p>
<p>https://dev.to/thekbbohara/how-to-change-update-the-kernel-linux-systemd-boot-baby-2hn9</p>
<p>Loin uuden tiedoston hakemistoon /boot/loader/entries/ kopioimalla toisen hakemistossa olevan tiedoston testiksi komennolla:</p>
<p class="code">sudo cp 2023-07-29_14-12-05_linux.conf linux-zen.conf</p>
<p>Tarkastelin tiedostoa ja sen sisältöä ja vertasin sitä /boot -hakemiston sisältöön:</p>
<img src="Images/2025-08-25-232127_1366x768_scrot.png"></img><br>
<p>Vaikka aikaisemmassa artikkelissa oli tarkat ohjeet, ajattelin että pitäisi olla varovainen näitä tiedostoja muokatessa ettei vahingossa rikkoisi jotain. :-)</p>
<p>Vaikutti siltä, että mikään ei menisi rikki jos muuttaisin tämän uuden linux-zen.conf -tiedoston sisältöä seuraavalla tavalla:</p>
<img src="Images/2025-08-25-232629_1366x768_scrot.png"></img><br>
<p>Käytännössä lisäsin vain -zen -päätteet tiettyihin kohtiin linux-zen.conf -tiedostossa.</p>
<p>Ajattelin että nyt voitaisiin rebootata kone uudestaan jos GRUBissa näkyisi muutoksia. Kello oli 23:28:00.</p>
<p>Jipii! Linux-zen -kernel näkyi vaihtoehdoissa ja se boottasi ilman ongelmia.</p>
<p>Asiasta kukkaruukkuun, mitään varmuutta ei ollut siitä että tämä korjaisi ongelmani Virtualboxin kernel-moduulin kanssa.</p>
<p>Olin kuitenkin päätellyt oikein, nimittäin avasin heti Virtualboxin ja käynnistin virtuaalikoneen onnistuneesti!</p>
<p>Oli tullut aika asentaa Debian.</p>

<p>Hieman käytin ohjenuorana opettajan ohjetta osoitteessa https://github.com/johannaheinonen/johanna-test-repo/blob/main/linux-20082025.md</p>
<p>Kello oli 23:39</p>
<p>Painoin "New" Virtualboxin graafisesta käyttöliittymästä.</p>
<img src="Images/2025-08-25-234226_1366x768_scrot.png"></img><br>
<p>Nimesin Virtuaalikoneen nimellä "Debian" ja valitsin tunnilla lataamani Debian levykuvan ISO Image-kohtaan.</p>
<p>Tässä vaiheessa mietin, pitäisikö käyttää "Proceed with unattended installation" ja jätin sen pois.</p>
<img src="Images/2025-08-25-234322_1366x768_scrot.png"></img><br>
<p>Säädin RAM-muistin kahteen gigaan ja CPU yhteen kappaleeseen.</p>
<img src="Images/2025-08-25-234434_1366x768_scrot.png"></img><br>
<p>Säädin virtuaalisen kovalevyn koon 20 Gigaan ja painoin "Finish".</p>
<p>Käynnistin virtuaalikoneen ja menin suoraan kohtaan "Start installer", sillä olin tehokkaalla tuulella kaiken tuon kernelihärdellin jäljiltä.</p>
<img src="Images/2025-08-25-234738_1366x768_scrot.png"></img><br>
<p>Valitsin kieleksi englannin.</p>
<img src="Images/2025-08-25-234904_1366x768_scrot.png"></img><br>
<p>Valitsin sijainniksi Other->Europe->Finland</p>
<img src="Images/2025-08-25-235127_1366x768_scrot.png"></img><br>
<p>Valitsin localeksi en-US.UTF-8</p>
<img src="Images/2025-08-25-235134_1366x768_scrot.png"></img><br>
<p>Näppäimistön kieleksi valitsin Finnish</p>
<img src="Images/2025-08-25-235143_1366x768_scrot.png"></img><br>
<p>Sitten odottelin ja laitoin hostnameksi debian</p>
<img src="Images/2025-08-25-235331_1366x768_scrot.png"></img><br>
<p>Verkon domain-nimeksi example.com</p>
<p>Jätin root-salasanan konfiguroimatta.</p>
<img src="Images/2025-08-25-235514_1366x768_scrot.png"></img><br>
<p>Kirjoitin nimeni, käyttäjänimeni ja salasanani käyttäjää varten.</p>
<img src="Images/2025-08-25-235659_1366x768_scrot.png"></img><br>
<img src="Images/2025-08-25-235733_1366x768_scrot.png"></img><br>
<img src="Images/2025-08-25-235845_1366x768_scrot.png"></img><br>
<p>Odottelin ja valitsin Partition disks -kohdassa Guided - Use entire disk</p>
<img src="Images/2025-08-25-235913_1366x768_scrot.png"></img><br>
<p>Valitsin levyn jota käytetään ja laitoin siihen All files in one partition. Painoin varmistuksissa vielä kyllä kaikkeen että homma lähtisi pyörimään.</p>
<img src="Images/2025-08-26-000010_1366x768_scrot.png"></img><br>
<img src="Images/2025-08-26-000116_1366x768_scrot.png"></img><br>
<img src="Images/2025-08-26-000126_1366x768_scrot.png"></img><br>
<p>Sitten odoteltiin.</p>
<img src="Images/2025-08-26-000206_1366x768_scrot.png"></img><br>
<p>Sain vielä ehdotuksen: Install the GRUB boot loader to your primary drive? Painoin kyllä, ei kai siinä muu auttanut vaikka päivän annos GRUBia tuli jo täyteen aikaisemmin tänään. :-)</p>
<img src="Images/2025-08-26-001202_1366x768_scrot.png"></img><br>
<p>Valitsin /dev/sda GRUBin sijainniksi.</p>
<img src="Images/2025-08-26-001351_1366x768_scrot.png"></img><br>
<p>Asennus valmis.</p>
<img src="Images/2025-08-26-001819_1366x768_scrot.png"></img><br>
<p>Kone boottaa ja sisäänkirjautuminen onnistuu! Jee!</p>
<img src="Images/2025-08-26-002641_1366x768_scrot.png"></img><br>
<p>Vielä yksi asia. Tahtoisin esitellä lempi Linux-ohjelmani mutta apt-get -komento ei toimi:</p>
<img src="Images/2025-08-26-003004_1366x768_scrot.png"></img><br>
<p>Tämän ongelman syy oli ilmeisesti, niin kuin artikkelissa https://github.com/johannaheinonen/johanna-test-repo/blob/main/linux-20082025.md lopussa kerrotaan, sources.list -tiedoston vajavaisuudessa. Kävin lisäämässä sinne tarvittavat tiedot:</p>
<p class="code">sudo vi /etc/apt/sources.list</p>
<p>ja lisättiin seuraavat tiedot:</p>
<img src="Images/2025-08-26-003743_1366x768_scrot.png"></img><br>
<p>Noniin. Ajettiin komennot:</p>
<p class="code">sudo apt-get update && sudo apt-get upgrade</p>
<p>ja toimi:</p>
<img src="2025-08-26-004034_1366x768_scrot.png"></img><br>
<p>Asensin pikaisesti lempiohjelmani, tmux:in (terminal multiplexerin) ja toisen hyödyllisen ohjelman, htop:in komennolla: </p>
<p class="code">sudo apt install tmux htop</p>
<img src="2025-08-26-004216_1366x768_scrot.png"></img>
Käynnistettiin tmux komennolla tmux:
<img src="2025-08-26-004241_1366x768_scrot.png"></img>
<img src="2025-08-26-004246_1366x768_scrot.png"></img>
<p>Jaettiin terminaali puoliksi painamalla ctrl+b ja %</p>
<img src="2025-08-26-004255_1366x768_scrot.png"></img>
<p>Sen jälkeen vielä toisessa suunnassa painamalla ctrl+b ja "</p>
<img src="2025-08-26-004307_1366x768_scrot.png"></img>
<p>Käynnistettiin vielä htop tässä uudessa paneelissa:</p>
<img src="2025-08-26-004310_1366x768_scrot.png"></img>
<p>htop näytti kamalan pieneltä tässä eikä paljon näkynyt. Painettiin siis ctrl+b ja z sekä suurennettiin terminaaliohjelma koko näytölle:</p>
<img src="2025-08-26-004333_1366x768_scrot.png">
<p>Valmista 2025-08-26 00:44:00</p>
	</div>
</div>
</body>
</html>
